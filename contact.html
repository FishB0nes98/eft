<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Chlly's Healing Space</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="contact-styles.css">
</head>

<body>
    <header>
        <nav>
            <div class="logo">
                <h1><a href="index.html">Chill To You</a></h1>
            </div>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="aboutme.html" class="nav-link">About Me</a></li>
                <li class="nav-dropdown">
                    <a href="#" class="nav-link services">Services</a>
                    <ul class="dropdown-menu">
                        <li><a href="techniques.html" class="dropdown-link">Techniques</a></li>
                        <li><a href="pricing.html" class="dropdown-link">Pricing</a></li>
                    </ul>
                </li>
                <li><a href="reviews.html" class="nav-link">Reviews</a></li>
                <li><a href="faq.html" class="nav-link">FAQ</a></li>
                <li><a href="contact.html" class="nav-link active">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="hero-section">
            <div class="hero-content">
                <h1>Contact Me</h1>
                <p class="hero-subtitle">Ready to begin your healing journey? Let's connect.</p>
            </div>
        </section>

        <section class="content-section intro">
            <div class="container">
                <div class="intro-text">
                    <p>To contact me, please fill out the form below, and I will get back to you shortly.</p>
                </div>
            </div>
        </section>

        <section class="contact-form-section">
            <div class="container">
                <div class="contact-form-container">
                    <form class="contact-form" action="https://formspree.io/f/xovlpeja" method="POST">
                        <!-- Hidden fields for Formspree -->
                        <input type="hidden" name="_next" value="thank-you.html">
                        <input type="hidden" name="_subject" value="New Contact Form Submission">

                        <div class="form-row">
                            <div class="form-group">
                                <label for="first-name">First Name *</label>
                                <input type="text" id="first-name" name="first-name" required>
                            </div>
                            <div class="form-group">
                                <label for="last-name">Last Name *</label>
                                <input type="text" id="last-name" name="last-name" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" required>
                        </div>

                        <div class="form-group">
                            <label for="preferred-name">How would you like to be addressed?</label>
                            <input type="text" id="preferred-name" name="preferred-name"
                                placeholder="e.g., Sarah, Ms. Johnson, Dr. Smith...">
                        </div>

                        <div class="form-group">
                            <label for="consultation-topic">What would you like to discuss during the 20-minute
                                consultation?</label>
                            <textarea id="consultation-topic" name="consultation-topic" rows="3"
                                placeholder="Please describe what topics or questions you'd like to cover during our consultation..."></textarea>
                        </div>

                        <div class="form-group calendar-group" id="calendar-section" style="display: none;">
                            <label>Select your preferred dates for the consultation:</label>
                            <div class="calendar-container">
                                <div class="calendar-header">
                                    <button type="button" class="calendar-nav" id="prev-month">&lt;</button>
                                    <span class="calendar-month" id="current-month"></span>
                                    <button type="button" class="calendar-nav" id="next-month">&gt;</button>
                                </div>
                                <div class="calendar-grid" id="calendar-grid"></div>
                                <div class="selected-dates">
                                    <p><strong>Selected dates:</strong></p>
                                    <div id="selected-dates-list">No dates selected</div>
                                </div>
                            </div>
                            <input type="hidden" id="preferred-dates" name="preferred-dates">
                        </div>

                        <div class="form-group">
                            <label for="message">Message *</label>
                            <textarea id="message" name="message" rows="6"
                                placeholder="Please tell me about what you're looking for, any specific concerns, or questions you have..."
                                required></textarea>
                        </div>

                        <div class="form-group checkbox-group">
                            <input type="checkbox" id="consent" name="consent" required>
                            <label for="consent">I consent to being contacted regarding my inquiry *</label>
                        </div>

                        <div class="form-submit">
                            <button type="submit" class="btn-primary">Send Message</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>


    </main>

    <div id="footer-placeholder"></div>
    <script src="footer-loader.js"></script>
    <script>
        function toggleMobileMenu() {
            const navMenu = document.querySelector('.nav-menu');
            const toggle = document.querySelector('.mobile-menu-toggle');

            navMenu.classList.toggle('active');
            toggle.classList.toggle('active');
        }

        // Calendar functionality
        let currentDate = new Date();
        let selectedDatesWithTimes = {}; // Object to store date and time ranges
        const MAX_DATES = 3;

        function showCalendar() {
            const calendarSection = document.getElementById('calendar-section');
            calendarSection.style.display = 'block';
            renderCalendar();
        }

        function hideCalendar() {
            const calendarSection = document.getElementById('calendar-section');
            calendarSection.style.display = 'none';
        }

        function renderCalendar() {
            const grid = document.getElementById('calendar-grid');
            const monthElement = document.getElementById('current-month');

            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            monthElement.textContent = new Date(year, month).toLocaleDateString('en-US', {
                month: 'long',
                year: 'numeric'
            });

            grid.innerHTML = '';

            // Add day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-day-header';
                dayHeader.textContent = day;
                grid.appendChild(dayHeader);
            });

            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();

            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                grid.appendChild(emptyDay);
            }

            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;

                const dayDate = new Date(year, month, day);
                const dateString = dayDate.toISOString().split('T')[0];

                // Mark past dates
                if (dayDate < today.setHours(0, 0, 0, 0)) {
                    dayElement.classList.add('past');
                }

                // Mark today
                if (dayDate.toDateString() === new Date().toDateString()) {
                    dayElement.classList.add('today');
                }

                // Mark selected dates
                if (selectedDatesWithTimes[dateString]) {
                    dayElement.classList.add('selected');
                }

                // Add click handler for future dates
                if (dayDate >= today.setHours(0, 0, 0, 0)) {
                    dayElement.addEventListener('click', () => toggleDate(dateString, dayElement));
                }

                grid.appendChild(dayElement);
            }
        }

        function toggleDate(dateString, element) {
            if (selectedDatesWithTimes[dateString]) {
                // Remove date
                delete selectedDatesWithTimes[dateString];
                if (element) element.classList.remove('selected');
            } else {
                // Check if we've reached the maximum
                if (Object.keys(selectedDatesWithTimes).length >= MAX_DATES) {
                    alert(`You can select a maximum of ${MAX_DATES} dates.`);
                    return;
                }

                // Add date with default time range
                selectedDatesWithTimes[dateString] = {
                    startTime: '09:00',
                    endTime: '17:00'
                };
                if (element) element.classList.add('selected');
            }

            updateSelectedDatesList();
            updateHiddenField();
        }

        function updateSelectedDatesList() {
            const listElement = document.getElementById('selected-dates-list');

            if (Object.keys(selectedDatesWithTimes).length === 0) {
                listElement.innerHTML = 'No dates selected';
                return;
            }

            const sortedDates = Object.keys(selectedDatesWithTimes).sort();
            let html = '';

            sortedDates.forEach(dateString => {
                const date = new Date(dateString + 'T00:00:00');
                const dateData = selectedDatesWithTimes[dateString];

                html += `
                    <div class="date-time-item">
                        <div class="date-header">
                            <span class="date-label">${date.toLocaleDateString('en-US', {
                    weekday: 'short',
                    month: 'short',
                    day: 'numeric'
                })}</span>
                            <button type="button" class="remove-date" onclick="removeDate('${dateString}')">×</button>
                        </div>
                        <div class="time-inputs">
                            <label>Available from:</label>
                            <input type="time" value="${dateData.startTime}" 
                                   onchange="updateTime('${dateString}', 'startTime', this.value)">
                            <label>to:</label>
                            <input type="time" value="${dateData.endTime}" 
                                   onchange="updateTime('${dateString}', 'endTime', this.value)">
                        </div>
                    </div>
                `;
            });

            listElement.innerHTML = html;
        }

        function removeDate(dateString) {
            delete selectedDatesWithTimes[dateString];
            renderCalendar();
            updateSelectedDatesList();
            updateHiddenField();
        }

        function updateTime(dateString, timeType, value) {
            if (selectedDatesWithTimes[dateString]) {
                selectedDatesWithTimes[dateString][timeType] = value;
                updateHiddenField();
            }
        }

        function updateHiddenField() {
            const formattedData = Object.keys(selectedDatesWithTimes).map(dateString => {
                const dateData = selectedDatesWithTimes[dateString];
                const date = new Date(dateString + 'T00:00:00');
                return `${date.toLocaleDateString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric'
                })}: ${dateData.startTime} - ${dateData.endTime}`;
            });

            document.getElementById('preferred-dates').value = formattedData.join('; ');
        }

        // Calendar navigation
        document.getElementById('prev-month').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        });

        document.getElementById('next-month').addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        });

        // Show/hide calendar based on consultation topic field
        document.getElementById('consultation-topic').addEventListener('input', function () {
            if (this.value.trim()) {
                showCalendar();
            } else {
                hideCalendar();
                selectedDates = [];
                updateSelectedDatesList();
                updateHiddenField();
            }
        });

        // Simple form submission with loading state
        document.querySelector('.contact-form').addEventListener('submit', function (e) {
            const submitBtn = document.querySelector('.btn-primary');

            // Show loading state
            submitBtn.textContent = 'Sending...';
            submitBtn.disabled = true;

            // Let the form submit normally to Formspree
            // Formspree will handle the redirect to thank-you.html
        });
    </script>
</body>

</html>